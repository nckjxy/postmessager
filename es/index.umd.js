!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("PostMessager",[],t):"object"==typeof exports?exports.PostMessager=t():e.PostMessager=t()}("undefined"!=typeof self?self:this,(function(){return(()=>{"use strict";var e={266:e=>{function t(e,s,i){if(e.addEventListener)e.addEventListener(s,i,!1);else{i.$$guid||(i.$$guid=t.guid++),e.events||(e.events={});var o=e.events[s];o||(o=e.events[s]={},e["on"+s]&&(o[0]=e["on"+s])),o[i.$$guid]=i,e["on"+s]=n}}function n(e){var t=!0;e=e||s(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var i in n)this.$$handleEvent=n[i],!1===this.$$handleEvent(e)&&(t=!1);return t}function s(e){return e.preventDefault=s.preventDefault,e.stopPropagation=s.stopPropagation,e}t.guid=1,s.preventDefault=function(){this.returnValue=!1},s.stopPropagation=function(){this.cancelBubble=!0},e.exports=t},0:e=>{e.exports=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.events&&e.events[t]&&delete e.events[t][n.$$guid]}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var s={};return(()=>{n.d(s,{default:()=>a});var e=n(266),t=n.n(e),i=n(0),o=n.n(i);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=class{constructor(e={},n="invokeCustomEvent"){r(this,"messager",{}),r(this,"instance",void 0),r(this,"type",void 0),this.instance=e,this.type=n,"undefined"!=typeof window?t()(window,"message",this.createEventHandler.bind(this)):console.error("仅支持在浏览器端运行")}subscribe(e,t){"actionName"in this.messager&&console.warn("订阅方法名重复，已覆盖旧的订阅"),this.messager[e]=t}unsubscribe(e){delete this.messager[e]}createEventHandler({data:e}){try{e&&"string"==typeof e&&(e=JSON.parse(e))}catch{console.warn("不是标准的JSON对象")}let{type:t,content:n={}}=e;if(this.type&&"actionName"in n&&(t=n.actionName),!t||!Object.keys(this.messager).includes(t))return!1;t in this.messager?this.messager[t](n):t in this.instance?this.instance[t](n):console.warn("没有注册type的执行方法")}removeEventHandler(){o()(window,"message",this.createEventHandler)}postMessageUp(e,t={},n){let s=e;this.type&&(t.actionName=e,s=this.type),window!==parent.window&&parent.window.postMessage(JSON.stringify({type:s,content:t,pageId:n}),"*")}postMessageDown(e,t,n,s){let i=t;if(this.type&&(n.actionName=t,i=this.type),e)window.frames[e].postMessage(JSON.stringify({type:i,content:n,pageId:s}),"*");else for(let e=0;e<window.frames.length;e++)window.frames[e].postMessage(JSON.stringify({type:i,content:n,pageId:s}),"*")}}})(),s.default})()}));